<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Détail Film - NayzCine</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #000;
      color: #fff;
    }
    .badge {
      background-color: rgba(255, 255, 255, 0.12);
      padding: 0.5rem 1.2rem;
      border-radius: 9999px;
      font-size: 0.875rem;
      margin-right: 0.5rem;
      margin-bottom: 0.5rem;
      height: 2.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      min-width: 85px;
      text-align: center;
    }
    .badge.star {
      background-color: rgba(255, 255, 255, 0.18);
      gap: 0.25rem;
    }
    .overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to right, rgba(0, 0, 0, 0.9) 30%, rgba(0, 0, 0, 0.6) 100%);
      z-index: 1;
    }
    .content {
      position: relative;
      z-index: 2;
    }
    video {
      border-radius: 1rem;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
      width: 100%;
      height: 270px;
    }
  </style>
</head>
<body>
  <div id="hero" class="relative w-full h-screen bg-cover bg-center">
    <div class="overlay"></div>
    <div class="content h-full flex flex-col lg:flex-row items-center justify-between px-6 lg:px-20 gap-10 py-10">
      <div class="max-w-2xl">
        <h1 id="title" class="text-5xl lg:text-6xl font-extrabold mb-6 leading-tight drop-shadow-[0_2px_6px_rgba(0,0,0,0.8)]"></h1>
        <div class="flex flex-wrap items-center mb-6" id="tags"></div>
        <p id="description" class="text-lg text-gray-300 leading-relaxed"></p>
        <button class="mt-8 px-6 py-3 bg-white text-black text-lg font-bold rounded-lg hover:bg-gray-200 transition duration-300 shadow-lg" onclick="goToMovie()">Regarder le film</button>
      </div>
      <div class="w-full max-w-md lg:w-[480px]">
        <video id="trailer" controls autoplay></video>
      </div>
    </div>
  </div>

  <script>
    const data = JSON.parse(localStorage.getItem('selectedMovie'));
    if (!data) window.location.href = '/';

    document.getElementById('hero').style.backgroundImage = `url(https://image.tmdb.org/t/p/original${data.poster})`;
    document.getElementById('title').textContent = data.title;
    document.getElementById('description').textContent = data.overview;

    const tagsContainer = document.getElementById('tags');
    data.genres.forEach(g => {
      const tag = document.createElement('div');
      tag.className = 'badge';
      tag.textContent = g.name;
      tagsContainer.appendChild(tag);
    });

    const rating = document.createElement('div');
    rating.className = 'badge star';
    rating.innerHTML = `⭐ ${data.vote_average.toFixed(1)}/10`;
    tagsContainer.appendChild(rating);

    const filmTag = document.createElement('div');
    filmTag.className = 'badge';
    filmTag.textContent = 'Film';
    tagsContainer.appendChild(filmTag);

    const duration = document.createElement('div');
    duration.className = 'badge';
    const h = Math.floor(data.runtime / 60);
    const m = data.runtime % 60;
    duration.textContent = `${h}h${m < 10 ? '0' : ''}${m}`;
    tagsContainer.appendChild(duration);

    // Lecture directe via BunnyCDN
    const title = data.title.toLowerCase();
    let source = null;

    if (title.includes("mission") && title.includes("impossible")) {
      source = "https://nayzcine-parent.b-cdn.net/MISSION%20IMPOSSIBLE%208%20_%20The%20Final%20Reckoning%20Bande%20Annonce%20VF%20(2025)%20Nouvelle%2C%20Tom%20Cruise.mp4";
    } else if (title.includes("destination") && title.includes("finale")) {
      source = "https://nayzcine-parent.b-cdn.net/DESTINATION%20FINALE%206%20_%20BLOODLINES%20Bande%20Annonce%20VF%20(2025).mp4";
    }

    if (source) {
      const video = document.getElementById('trailer');
      const sourceTag = document.createElement('source');
      sourceTag.src = source;
      sourceTag.type = 'video/mp4';
      video.appendChild(sourceTag);
    } else {
      document.getElementById('trailer').style.display = 'none';
    }
  </script>
<script>
  function goToMovie() {
    const data = JSON.parse(localStorage.getItem('selectedMovie'));
    if (data && data.title) {
      localStorage.setItem('currentMovieTitle', data.title);
      window.location.href = 'movie.html';
    }
  }
</script>
</body>
</html>
